# PDF-CLI

A powerful command-line tool for reading, writing, and converting PDF files to and from Markdown, implemented entirely in Rust without relying on external PDF libraries.

## Features

- **PDF Generation**: Create PDFs from scratch with custom fonts and text content
- **PDF Parsing**: Extract text content from existing PDF files (Tj, TJ operators, font encodings)
- **Markdown to PDF**: Convert Markdown documents to PDF with rich formatting (headers, lists, task lists, blockquotes, tables, code blocks, definition lists)
- **PDF to Markdown**: Extract text from PDFs and save as Markdown
- **Image Support**: Embed JPEG images with dimension parsing and aspect-ratio scaling
- **PDF Merging**: Combine multiple PDFs into one
- **PDF Splitting**: Extract page ranges into new PDFs
- **Page Rotation**: Rotate pages by 0/90/180/270Â°
- **Document Metadata**: Embed title, author, subject, keywords
- **Annotations**: Text notes and clickable link annotations
- **Landscape/Portrait**: Configurable page orientation
- **Page Numbering**: Automatic footer page numbers
- **Multi-page Support**: Automatically split long documents into multiple pages

## Installation

### From Source

```bash
git clone https://github.com/yourusername/pdf-cli.git
cd pdf-cli
cargo build --release
```

The binary will be available at `target/release/pdf-cli`.

## Usage

### Basic Commands

#### Create a Simple PDF

```bash
pdf-cli create output.pdf "Hello, World!"
```

#### Create PDF with Custom Font and Size

```bash
pdf-cli create output.pdf "Hello, World!" --font "Times-Roman" --font-size 14
```

#### Convert Markdown to PDF

```bash
pdf-cli md-to-pdf input.md output.pdf
```

#### Convert Markdown to PDF with Custom Styling

```bash
pdf-cli md-to-pdf input.md output.pdf --font "Helvetica" --font-size 12
```

#### Extract Text from PDF

```bash
pdf-cli extract input.pdf
```

#### Convert PDF to Markdown

```bash
pdf-cli pdf-to-md input.pdf output.md
```

#### Add Image to PDF

```bash
pdf-cli add-image document.pdf image.jpg --x 100 --y 100 --width 200 --height 200
```

#### Landscape PDF

```bash
pdf-cli md-to-pdf input.md output.pdf --landscape
```

#### Merge PDFs

```bash
pdf-cli merge file1.pdf file2.pdf file3.pdf -o merged.pdf
```

#### Split PDF (extract pages 2-5)

```bash
pdf-cli split input.pdf -o pages2to5.pdf --start 2 --end 5
```

#### Rotate PDF

```bash
pdf-cli rotate input.pdf -o rotated.pdf --angle 90
```

#### Create PDF with Metadata

```bash
pdf-cli md-to-pdf-meta input.md output.pdf --title "My Document" --author "Author Name" --subject "Topic"
```

### Supported Fonts

- Helvetica
- Times-Roman
- Courier
- And other standard PDF Type 1 fonts

## Examples

### Creating a Multi-page Document

```bash
pdf-cli create long-document.pdf "$(cat document.txt)" --font-size 10
```

### Converting Complex Markdown

````bash
# Create a sample markdown file
cat > sample.md << EOF
# Sample Document

This is a **bold** text with *italic* formatting.

## Tables

| Name | Age | Country |
|------|-----|---------|
| John | 25  | USA     |
| Jane | 30  | UK      |

### Lists

1. First item
2. Second item
   - Nested item
   - Another nested item

### Code Examples

```rust
fn main() {
    println!("Hello, PDF!");
}
````

EOF

# Convert to PDF

pdf-cli md-to-pdf sample.md sample.pdf --font "Times-Roman" --font-size 12

```

## Architecture

This tool is built with a modular architecture:

- **PDF Parser** (`src/pdf.rs`): PDF parsing, text extraction, font encoding (WinAnsi/MacRoman)
- **PDF Generator** (`src/pdf_generator.rs`): Creates PDFs with configurable layout and page numbering
- **Elements** (`src/elements.rs`): Structured markdown element types and parser
- **Markdown** (`src/markdown.rs`): Markdown-to-PDF pipeline with rich formatting
- **PDF Operations** (`src/pdf_ops.rs`): Merge, split, rotate, metadata, annotations
- **Image Handler** (`src/image.rs`): JPEG embedding with dimension parsing
- **Compression** (`src/compression.rs`): PDF stream compression

## Limitations

- Text extraction works best with PDFs generated by this tool or simple Type 1 font PDFs
- Font support is limited to standard Type 1 fonts (Helvetica, Times-Roman, Courier)
- Image support is JPEG only (PNG/BMP dimension parsing available but not embedding)
- Encryption and interactive forms are not yet implemented

## Contributing

Contributions are welcome! Please read our [Contributing Guidelines](CONTRIBUTING.md) for details.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Acknowledgments

- Built entirely in Rust without external PDF dependencies
- Implements core PDF specifications from scratch
- Inspired by the need for a lightweight PDF toolchain
```
